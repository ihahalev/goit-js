{"version":3,"sources":["webpack:///./country-service.js","webpack:///./index.js","webpack:///./templates/details.hbs"],"names":["query","this","str","fetchCountries","fetch","baseUrl","then","response","ok","json","PNotify","width","refs","countryInput","document","getElementById","countryList","querySelector","countryDetails","insertCountryDetails","country","insertAdjacentHTML","countryMarkup","buildCountryDetailsMarkup","addEventListener","debounce","event","target","value","searchCountry","countryService","searchQuery","data","length","innerHTML","removeEventListener","openCountryDetails","text","countries","e","preventDefault","cioc","find","searchCountryDetails","dataset","code","reduce","acc","name","buildListCountriesMarkup","Handlebars","module","exports","template","container","depth0","helpers","partials","helper","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","escapeExpression","hooks","helperMissing","nullContext","stack1","alias1","alias2","alias4","program","noop"],"mappings":"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","file":"main.e9fa1a6528d67cd7791c.js","sourcesContent":["const baseUrl = 'https://restcountries.eu/rest/v2';\r\nconst resource = '/name/';\r\n\r\nexport default {\r\n  query: '',\r\n  get searchQuery() {\r\n    return this.query;\r\n  },\r\n  set searchQuery(str) {\r\n    this.query = str;\r\n  },\r\n  fetchCountries() {\r\n    return fetch(baseUrl + resource + this.query).then(response => {\r\n      if (response.ok) {\r\n        return response.json();\r\n      }\r\n    });\r\n  },\r\n};\r\n","import './styles.css';\nimport * as PNotify from '@pnotify/core';\nimport '@pnotify/core/dist/PNotify.css';\nimport '@pnotify/core/dist/BrightTheme.css';\nimport debounce from 'lodash.debounce';\n// import throttle from 'lodash.throttle';\n\nimport countryMarkup from './templates/details.hbs';\n\nimport countryService from './country-service';\n\nPNotify.defaults.width = '400px';\n\nconst refs = {\n  countryInput: document.getElementById('country'),\n  countryList: document.querySelector('.country__list'),\n  countryDetails: document.querySelector('.details'),\n};\n\nrefs.countryInput.addEventListener(\n  'input',\n  debounce(searchCountryHandler, 500),\n);\n\nfunction searchCountryHandler(event) {\n  if (!event.target.value) {\n    return;\n  }\n  const searchCountry = event.target.value;\n  countryService.searchQuery = searchCountry;\n  countryService.fetchCountries().then(data => {\n    if (data.length > 10) {\n      refs.countryList.innerHTML = '';\n      refs.countryList.removeEventListener('click', openCountryDetails);\n      refs.countryDetails.innerHTML = '';\n      return PNotify.error({\n        text: 'Too many matches found. Please enter a more specific query!',\n      });\n    }\n    if (data.length > 1) {\n      refs.countryDetails.innerHTML = '';\n      insertListCountries(data);\n      refs.countryList.addEventListener('click', openCountryDetails);\n    } else {\n      refs.countryList.innerHTML = '';\n      insertCountryDetails(data[0]);\n    }\n    function openCountryDetails(e) {\n      e.preventDefault();\n      refs.countryDetails.innerHTML = '';\n      const countryToOpen = e.target.dataset.code;\n      searchCountryDetails(countryToOpen, data);\n    }\n  });\n}\n\nfunction insertListCountries(countries) {\n  refs.countryList.insertAdjacentHTML(\n    'beforeend',\n    buildListCountriesMarkup(countries),\n  );\n}\n\nfunction buildListCountriesMarkup(countries) {\n  const markup = countries.reduce(\n    (acc, country) =>\n      acc + `<li data-code=\"${country.cioc}\">${country.name}</li>`,\n    '',\n  );\n  return markup;\n}\n\nfunction insertCountryDetails(country) {\n  refs.countryDetails.insertAdjacentHTML(\n    'beforeend',\n    buildCountryDetailsMarkup(country),\n  );\n}\n\nfunction buildCountryDetailsMarkup(country) {\n  return countryMarkup(country);\n}\n\nfunction searchCountryDetails(cioc, countries) {\n  const countryDetails = countries.find(country => country.cioc === cioc);\n  insertCountryDetails(countryDetails);\n}\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"    <li>\"\n    + container.escapeExpression(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":8},\"end\":{\"line\":8,\"column\":16}}}) : helper)))\n    + \"</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div>\\r\\n  <p><b>Country: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":17},\"end\":{\"line\":2,\"column\":25}}}) : helper)))\n    + \"</b></p>\\r\\n  <p><b>Capital: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"capital\") || (depth0 != null ? lookupProperty(depth0,\"capital\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"capital\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":17},\"end\":{\"line\":3,\"column\":28}}}) : helper)))\n    + \"</b></p>\\r\\n  <p><b>Population: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"population\") || (depth0 != null ? lookupProperty(depth0,\"population\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"population\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":20},\"end\":{\"line\":4,\"column\":34}}}) : helper)))\n    + \"</b></p>\\r\\n  <p><b>Languages:</b></p>\\r\\n  <ul>\\r\\n\"\n    + ((stack1 = lookupProperty(helpers,\"each\").call(alias1,(depth0 != null ? lookupProperty(depth0,\"languages\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":4},\"end\":{\"line\":9,\"column\":13}}})) != null ? stack1 : \"\")\n    + \"  </ul>\\r\\n</div>\\r\\n<img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"flag\") || (depth0 != null ? lookupProperty(depth0,\"flag\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"flag\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":10},\"end\":{\"line\":12,\"column\":18}}}) : helper)))\n    + \"\\\">\\r\\n</img>\";\n},\"useData\":true});"],"sourceRoot":""}