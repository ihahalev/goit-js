{"version":3,"sources":["webpack:///./index.js","webpack:///./layout.js","webpack:///./templates/photo-card.hbs"],"names":["PNotify","width","masonryInstance","Masonry","columnWidth","itemSelector","percentPosition","transitionDuration","stagger","initLayout","lightbox","imgLoaded","document","querySelector","basicLightbox","refs","searchForm","gallery","infScrollInstance","InfiniteScroll","responseType","history","append","status","scrollThreshold","path","this","searchQuery","pageIndex","on","response","collection","JSON","parse","text","total","insertListItems","hits","err","console","log","loadNextPage","items","markups","map","item","markup","photoCard","li","createElement","classList","add","insertAdjacentHTML","domMarkup","appended","layout","appendItems","addEventListener","e","preventDefault","window","scrollTo","innerHTML","currentTarget","elements","query","value","searchQueryHandler","event","imageUrl","target","dataset","source","imageAlt","getAttribute","element","show","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call"],"mappings":"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","file":"main.90c998d1dd35ef2f9aba.js","sourcesContent":["import './styles.css';\n\nimport * as PNotify from '@pnotify/core';\nimport '@pnotify/core/dist/PNotify.css';\nimport '@pnotify/core/dist/BrightTheme.css';\n\nPNotify.defaults.width = '400px';\n\nimport Masonry from 'masonry-layout';\nimport imgLoaded from 'imagesloaded';\n\nconst masonryInstance = new Masonry('.grid', {\n  columnWidth: '.grid-sizer',\n  itemSelector: '.grid-item',\n  percentPosition: true,\n  transitionDuration: '0.2s',\n  stagger: 50,\n  initLayout: true,\n});\nlet imgLoadedInstance = imgLoaded(document.querySelector('.grid'));\n\nimport * as basicLightbox from 'basiclightbox';\nimport 'basicLightbox/dist/basicLightbox.min.css';\n\nconst lightbox = basicLightbox.create(`<div class=\"lightbox__content\"></div>`);\n\nimport domMarkup from './layout';\n\nconst refs = {\n  searchForm: document.querySelector('#search-form'),\n  gallery: document.querySelector('.gallery'),\n};\n\nimport InfiniteScroll from 'infinite-scroll';\n\nconst infScrollInstance = new InfiniteScroll(refs.gallery, {\n  responseType: 'text',\n  history: false,\n  append: false,\n  status: '.page-load-status',\n  scrollThreshold: 100,\n  // outlayer: masonryInstance,\n  path() {\n    return (\n      'https://cors-anywhere.herokuapp.com/https://pixabay.com/api/' +\n      `?image_type=photo&orientation=horizontal` +\n      `&q=${this.searchQuery}&page=${this.pageIndex}&per_page=12` +\n      `&key=16573649-3de34e680630468dd865749b6`\n    );\n  },\n});\n// infScrollInstance.imagesLoaded = imgLoaded;\ninfScrollInstance.searchQuery = '';\n\n// console.log(infScrollInstance);\n// infScrollInstance.on('load', response => {\n//   const collection = JSON.parse(response);\n//   const markups = domMarkup(collection.hits);\n//   refs.gallery.append(...markups);\n//   masonryInstance.appended(markups);\n//   imgLoadedInstance = imgLoaded(document.querySelector('.grid'));\n//   imgLoadedInstance.on('progress', () => {\n//     // infScrollInstance.appendItems(markups);\n\n//     masonryInstance.layout();\n//   });\n// });\n// infScrollInstance.loadNextPage();\n\nrefs.searchForm.addEventListener('submit', searchFormHandler);\nrefs.gallery.addEventListener('click', openImage);\n\nfunction searchFormHandler(e) {\n  e.preventDefault();\n  window.scrollTo(0, 0);\n  clearListItems();\n  infScrollInstance.pageIndex = 1;\n  infScrollInstance.searchQuery = e.currentTarget.elements.query.value;\n  searchQueryHandler();\n}\n\nasync function searchQueryHandler() {\n  infScrollInstance.on('load', response => {\n    const collection = JSON.parse(response);\n    try {\n      if (infScrollInstance.pageIndex === 2) {\n        PNotify.info({\n          text: `There are ${collection.total} results`,\n        });\n      }\n      insertListItems(collection.hits);\n    } catch (err) {\n      console.log(err);\n      throw err;\n    }\n  });\n  infScrollInstance.loadNextPage();\n}\n\nfunction insertListItems(items) {\n  const markups = domMarkup(items);\n  refs.gallery.append(...markups);\n  masonryInstance.appended(markups);\n\n  imgLoadedInstance = imgLoaded(document.querySelector('.grid'));\n  imgLoadedInstance.on('progress', () => {\n    masonryInstance.layout();\n  });\n  infScrollInstance.appendItems(markups);\n  console.log(infScrollInstance);\n}\n\nfunction clearListItems() {\n  refs.gallery.innerHTML = '<li class=\"grid-sizer\"></li>';\n}\n\nfunction openImage(event) {\n  event.preventDefault();\n\n  const imageUrl = event.target.dataset.source;\n  const imageAlt = event.target.getAttribute('alt');\n  lightbox.element().innerHTML = `<img src=\"${imageUrl}\" alt=\"${imageAlt}\"/>`;\n  lightbox.show();\n}\n","import photoCard from './templates/photo-card.hbs';\r\n\r\nexport default function domMarkup(items) {\r\n  const markups = items.map(item => {\r\n    const markup = photoCard(item);\r\n    const li = document.createElement('li');\r\n    li.classList.add('grid-item');\r\n    li.classList.add('gallery__item');\r\n    li.insertAdjacentHTML('beforeend', markup);\r\n    return li;\r\n  });\r\n  return markups;\r\n\r\n  // WTF не осуществляеться вставка\r\n  // const markups = photoCard(items);\r\n  // const ul = document.createElement('ul');\r\n  // // ul.classList.add('blank');\r\n  // ul.insertAdjacentHTML('beforeend', markups);\r\n  // const list = ul.querySelector('.grid-item');\r\n  // console.log(ul);\r\n  // console.log(ul.children);\r\n  // console.log(list);\r\n  // return ul.children;\r\n}\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"photo-card\\\">\\r\\n  <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":12},\"end\":{\"line\":2,\"column\":28}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":35},\"end\":{\"line\":2,\"column\":43}}}) : helper)))\n    + \"\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":58},\"end\":{\"line\":2,\"column\":75}}}) : helper)))\n    + \"\\\" />\\r\\n\\r\\n  <div class=\\\"stats\\\">\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n      \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":6},\"end\":{\"line\":7,\"column\":15}}}) : helper)))\n    + \"\\r\\n    </p>\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">visibility</i>\\r\\n      \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":11,\"column\":6},\"end\":{\"line\":11,\"column\":15}}}) : helper)))\n    + \"\\r\\n    </p>\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">comment</i>\\r\\n      \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":15,\"column\":6},\"end\":{\"line\":15,\"column\":18}}}) : helper)))\n    + \"\\r\\n    </p>\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n      \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":19,\"column\":6},\"end\":{\"line\":19,\"column\":19}}}) : helper)))\n    + \"\\r\\n    </p>\\r\\n  </div>\\r\\n</div>\";\n},\"useData\":true});"],"sourceRoot":""}